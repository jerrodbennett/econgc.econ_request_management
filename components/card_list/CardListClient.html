<!DOCTYPE f8component>

<definition> { id:"card_list", label:"Card List",
    className:"CardListServer", renderable:"true" }
</definition>

<attributes> [
    {
    name:"bucket",
    label:"Bucket",
    type:"choice",
    attributes:{
    "choice_type":"dropdown",
    "buckets":"true"
    }
    },
    {
    name:"condition",
    label:"Condition",
    type:"condition",
    attributes:{
    bucket_slot:"bucket"
    }
    },
    {
    name:"title_slot_1",
    label:"Title slot 1",
    type:"choice",
    attributes:{
    choice_type:"dropdown",
    slots:true,
    bucket_slot:"bucket"
    }
    },
    {
    name:"title_slot_2",
    label:"Title slot 2",
    type:"choice",
    attributes:{
    choice_type:"dropdown",
    slots:true,
    bucket_slot:"bucket"
    }
    },
    {
    name:"title_slot_3",
    label:"Title slot 3",
    type:"choice",
    attributes:{
    choice_type:"dropdown",
    slots:true,
    bucket_slot:"bucket"
    }
    },
    {
    name:"description_slot",
    label:"Description slot",
    type:"choice",
    attributes:{
    choice_type:"dropdown",
    slots:true,
    bucket_slot:"bucket"
    }
    },
    {
    name:"icon_slot",
    label:"Icon slot",
    type:"choice",
    attributes:{
    choice_type:"dropdown",
    slots:true,
    filter:"type:eq:icon",
    bucket_slot:"bucket"
    }
    }
    ]
</attributes>

<attributes_layout> []</attributes_layout>

<attributes_display_rules> []</attributes_display_rules>

<style>
    .demo-list-three {
        width: 650px;
    }
</style>

<script>
    exports.component = ComponentUI.create({
        onRender: function (container, data, attributes) {
            var w = container.width();
            var h = container.height() || 400;
            this.id = 'uniqueCardListID' + Client.guid();
            var primaryDiv = $('<div id="' + this.id + '"></div>');

            container.append(primaryDiv);

            //Add UL to primaryDiv
            var ul = $('<ul class="demo-list-three mdl-list">');
            primaryDiv.append(ul);


            //Iterate through the unscheduled events
            for (var i = 0; i < data.records.length; i++) {
                var record = data.records[i];
                //alert('ICON - ' + record.icon);
                var li = $('<li class="mdl-list__item mdl-list__item--three-line"><span class="mdl-list__item-primary-content"><i class="fa fa-' + record.icon + ' fa-2x" aria-hidden="true">          </i><span>' + record.title + '</span><span class="mdl-list__item-text-body">' + record.description + '</span> </span> <span class="mdl-list__item-secondary-content"> <a class="mdl-list__item-secondary-action" href="#"><i class="material-icons">star</i></a> </span> </li>')
                //var li = $('<li class="mdl-list__item mdl-list__item--three-line"><span class="mdl-list__item-primary-content"><i class="material-icons mdl-list__item-avatar">person</i><span>' + record.title + '</span><span class="mdl-list__item-text-body">' + record.description + '</span> </span> <span class="mdl-list__item-secondary-content"> <a class="mdl-list__item-secondary-action" href="#"><i class="material-icons">star</i></a> </span> </li>')
                ul.append(li);
            }

            //Add LIs to the UL
            //var li = $('<li class="mdl-list__item mdl-list__item--three-line">');
            //ul.append(li);

            //Add content to the LI
            //var liContent = $('<span class="mdl-list__item-primary-content"><i class="material-icons mdl-list__item-avatar">person</i><span>Bryan Cranston</span><span class="mdl-list__item-text-body">Bryan Cranston played the role of Walter in Breaking Bad. He is also known for playing Hal in Malcom in the Middle.</span></span><span class="mdl-list__item-secondary-content"><a class="mdl-list__item-secondary-action" href="#"><i class="material-icons">star</i></a></span>');
            //li.append(liContent);

        },

        onUnloaded: function () {

        },

        className: "CardListClient"
    });
</script>